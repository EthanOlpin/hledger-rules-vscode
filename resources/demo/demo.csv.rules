# Directives:
include other.rules
fields date, type, amount, code
source filename*.csv | sed 's/\r//g'
archive
encoding iso-8859-1
separator ,
skip 10
date-format YYYY-MM-DD
timezone America/New_York
newest-first
intra-day-reversed
decimal-mark .
balance-type ==*
end

# `if` blocks:
if 
%type Payment && %description ^([[:digit:]]{4})-[[:digit:]]{2}
%type Rewards && %description [[:digit:]]{2}/([[:digit:]]{4})$
  comment Tax Year \1

# `if` tables (supports separators: `,` `|` `/`):
if,account2,comment
Payment,Wells Fargo,COMMENT VALUE
Deposit,Chase,COMMENT VALUE2
; comments
Transfer,Amex,COMMENT VALUE3